<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Valentine - L√° B√†i B√≠ ·∫®n</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Parisienne&family=Courgette&family=Dancing+Script&display=swap" rel="stylesheet"/>
  
  <style>
    body {
      margin: 0;
      padding: 5px;
      background: #d9c2a6;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: Arial, sans-serif;
    }

    .frame {
      width: 97%;
      max-width: 490px;         
      background: white;
      padding: 12px;
      border: 7px solid #000;
      box-shadow: 0 7px 20px rgba(0,0,0,0.3);
      position: relative;
      overflow: visible;
    }

    /* N√∫t ƒëi·ªÅu khi·ªÉn nh·∫°c */
    .music-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 45px;
      height: 45px;
      background: rgba(255, 105, 180, 0.18);
      border: 2px solid #ff69b4;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
      transition: all 0.4s ease;
      z-index: 20;
      font-size: 1.6rem;
      color: #c71585;
      user-select: none;
    }

    .music-btn:hover {
      transform: scale(1.15);
      background: rgba(255, 105, 180, 0.35);
      box-shadow: 0 6px 18px rgba(255, 20, 147, 0.4);
    }

    .music-btn.playing {
      background: rgba(255, 105, 180, 0.4);
      animation: gentlePulse 2s infinite ease-in-out;
    }

    @keyframes gentlePulse {
      0%, 100% { transform: scale(1); }
      50%      { transform: scale(1.08); }
    }

    .decor-flower {
      position: absolute;
      width: 90px;
      height: auto;
      opacity: 0;
      z-index: 10;
      pointer-events: none;
      animation: flowerAppear 2s ease-out forwards 0.5s;
    }

    .decor-flower.left { top: -38px; left: -38px; transform: rotate(-15deg); }
    .decor-flower.right { top: -38px; right: -45px; transform: rotate(15deg); }

    @keyframes flowerAppear {
      0% { opacity: 0; transform: scale(0.6) translateY(18px) rotate(var(--rotate, 0deg)); }
      100% { opacity: 0.95; transform: scale(1) translateY(0) rotate(var(--rotate, 0deg)); }
    }

    .title {
      text-align: center;
      font-family: 'Great Vibes', cursive;
      font-size: 2.45rem;
      color: #1a0f05;
      margin: 0 0 14px;
      opacity: 0;
      animation: fadeIn 1.5s forwards 0.5s;
    }

    @keyframes fadeIn { to { opacity: 1; } }

    .content {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: space-between;
    }

    .photos-left {
      flex: 1;
      min-width: 190px;
      max-width: 260px;
    }

    .photos {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 9px;
    }

    .card-container {
      perspective: 1000px;
      height: 150px;             
    }

    .mysterious-blink {
      animation: mysteriousBlink 3.2s infinite ease-in-out;
    }

    .mysterious-blink.smooth-redirect.clicking,
    .mysterious-blink.clicking {
      animation: none !important;
    }

    @keyframes mysteriousBlink {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        opacity: 1;
      }
      50% {
        transform: scale(1.07);
        box-shadow: 0 8px 18px rgba(0,0,0,0.38);
        opacity: 0.93;
      }
    }

    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.9s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      cursor: pointer;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .card.flipped { transform: rotateY(180deg); }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 7px;
      box-sizing: border-box;
      text-align: center;
    }

    .card-back {
      background: #f5f0e8 url('anh/labai.png') center / contain no-repeat;
      color: #5d2e1e;
      font-family: 'Great Vibes', cursive;
      font-weight: 600;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 7px 5px;
    }

    .card-front {
      transform: rotateY(180deg);
      background: linear-gradient(135deg, #ffe4e1 0%, #fff0f5 100%);
      flex-direction: column;
      font-family: 'Dancing Script', cursive;
      color: #4a0e0e;
      font-size: 1rem;
    }

    .surprise-img {
      max-width: 58%;
      max-height: 46%;
      border-radius: 6px;
      margin-bottom: 5px;
      box-shadow: 0 2px 7px rgba(0,0,0,0.2);
    }

    .caption {
      margin-top: 4px;
      font-size: 0.92rem;
      color: #c71585;
      font-family: 'Courgette', cursive;
    }

    .smooth-redirect {
      transition: all 0.9s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    .smooth-redirect.clicking {
      transform: scale(1.1) translateY(-7px);
      opacity: 0.4;
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }

    .smooth-redirect.clicking .card-front,
    .smooth-redirect.clicking .card-back {
      opacity: 0.4;
    }

    #letter-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.7s ease;
    }

    #letter-modal.active {
      display: flex;
      opacity: 1;
    }

    .letter-wrapper {
      width: 95vw;
      max-width: 640px;
      aspect-ratio: 16 / 9;
      background: url('anh/backlathu.png') center/cover no-repeat;
      border-radius: 11px;
      box-shadow: 0 14px 45px rgba(0,0,0,0.6);
      overflow: hidden;
      position: relative;
      transform: scale(0.7) rotateX(10deg) translateY(20px);
      opacity: 0;
      transition: all 1s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    #letter-modal.active .letter-wrapper {
      transform: scale(1) rotateX(0deg) translateY(0);
      opacity: 1;
    }

    .letter-content {
      position: absolute;
      inset: 7% 8% 8% 8%;
      background: rgba(255, 248, 240, 0.94);
      border: 2px dashed #c71585;
      border-radius: 9px;
      padding: 5% 6%;
      overflow-y: auto;
      font-family: 'Dancing Script', cursive;
      color: #3a0a0a;
      font-size: clamp(1rem, 3.3vw, 1.5rem);
      line-height: 1.48;
      text-align: left;
    }

    .letter-title {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(1.7rem, 4.6vw, 2.6rem);
      color: #c71585;
      text-align: center;
      margin: 0 0 0.7rem 0;
    }

    #typed-text {
      margin: 0;
      white-space: pre-line;
    }

    .letter-sign {
      text-align: right;
      font-size: 1.4rem;
      color: #8b0000;
      padding-top: 1.1rem;
      opacity: 0;
      transition: opacity 2s ease;
    }

    .small-heart { color: #ff1493; font-size: 1.6rem; }

    .calendar-right {
      flex: 1;
      min-width: 190px;
      text-align: center;
      opacity: 0;
      animation: fadeIn 1.2s forwards 1.6s;
    }

    .month { 
      font-family: 'Parisienne', cursive; 
      font-size: 1.55rem; 
      color: #2c1a0d; 
      margin-bottom: 7px; 
    }

    table { 
      margin: 0 auto; 
      border-collapse: collapse; 
      font-size: 0.86rem; 
      width: 100%; 
      max-width: 260px;
    }

    th, td { 
      padding: 5px; 
      border: 1px solid #eee; 
      text-align: center; 
    }

    th { background: #f8f8f8; font-weight: bold; }

    .valentines-day {
      background: #fff0f0;
      font-weight: bold;
      position: relative;
      animation: heartbeat 1.2s ease-in-out infinite;
    }

    .valentines-day::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 145%;
      height: 145%;
      background: url('anh/traitim.png') center/contain no-repeat;
      pointer-events: none;
      z-index: 1;
      opacity: 0.9;
      animation: heartbeat-child 1.2s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0%,40%,80%,100% { transform: scale(1); }
      20% { transform: scale(1.2); }
      60% { transform: scale(1.12); }
    }

    @keyframes heartbeat-child {
      0%,40%,80%,100% { transform: translate(-50%, -50%) scale(1); }
      20% { transform: translate(-50%, -50%) scale(1.1); }
      60% { transform: translate(-50%, -50%) scale(1.05); }
    }

    .surprise-hint {
      margin-top: 12px;
      text-align: center;
      font-family: "Times New Roman", Times, serif;
      font-size: 1.3rem;
      color: #000000;
      font-weight: bold;
      letter-spacing: 0.2px;
      opacity: 0.95;
      transition: all 0.4s ease;
    }

    .surprise-hint:hover {
      transform: scale(1.05);
      color: #222222;
      opacity: 1;
    }

    #background-music {
      display: none;
      visibility: hidden;
      width: 0;
      height: 0;
    }

    @media (max-width: 580px) {
      .content { flex-direction: column; gap: 14px; }
      .photos { grid-template-columns: repeat(2, 1fr); }
      .title { font-size: 2.2rem; }
      .decor-flower { width: 80px; }
      .music-btn {
        width: 42px;
        height: 42px;
        top: 12px;
        right: 12px;
        font-size: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .photos { grid-template-columns: 1fr; }
      .letter-wrapper { width: 96vw; }
      .letter-content { font-size: clamp(0.9rem, 3.6vw, 1.3rem); }
      .surprise-hint { font-size: 1.2rem; margin-top: 10px; }
      .mysterious-blink { animation-duration: 4s; }
      .music-btn {
        width: 38px;
        height: 38px;
        top: 10px;
        right: 10px;
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>

  <audio id="background-music" loop>
    <source src="anh/nhac.mp3" type="audio/mpeg">
    Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ audio.
  </audio>

  <div class="frame">

    <div id="music-control" class="music-btn" onclick="toggleMusic()">
      <span id="music-icon">‚ô´</span>
    </div>

    <img src="anh/left.PNG" class="decor-flower left" alt="Hoa trang tr√≠">
    <img src="anh/right.png" class="decor-flower right" alt="Hoa trang tr√≠">

    <h1 class="title">Happy Valentine</h1>

    <div class="content">
      <div class="photos-left">
        <div class="photos">

          <div class="card-container mysterious-blink">
            <div class="card" id="letter-card">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <div style="font-size:1.3rem; color:#c71585;">M·ªü th∆∞...</div>
              </div>
            </div>
          </div>

          <div class="card-container mysterious-blink">
            <div class="card smooth-redirect" id="go-to-page2">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <img class="surprise-img" src="https://images.unsplash.com/photo-1529336953128-a85760f58cb5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="">
                <div class="caption">C√πng nhau m√£i nh√©! ‚ù§Ô∏è</div>
              </div>
            </div>
          </div>

          <div class="card-container mysterious-blink">
            <div class="card smooth-redirect" id="go-to-kiss">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <img class="surprise-img" src="https://images.unsplash.com/photo-1511632765486-a01980e01a3b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="">
                <div class="caption">H√¥n c√°i n√†o n√®ee üòò</div>
              </div>
            </div>
          </div>

          <div class="card-container mysterious-blink">
            <div class="card smooth-redirect" id="go-to-gift">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <img class="surprise-img" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="">
                <div class="caption">Valentine n√†y d√†nh cho em/anh ƒë√≥!</div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="calendar-right">
        <div class="month">‚Ä¢ February ‚Ä¢</div>
        <table>
          <thead><tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr></thead>
          <tbody>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td>1</td></tr>
            <tr><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td></tr>
            <tr><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td class="valentines-day">14</td><td>15</td></tr>
            <tr><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td></tr>
            <tr><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td></td></tr>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
          </tbody>
        </table>

        <div class="surprise-hint">
          Iem ch·ªçn l√° n√†o n√®ee~ ‚ù§Ô∏è
        </div>
      </div>
    </div>
  </div>

  <div id="letter-modal" onclick="closeModal(event)">
    <div class="letter-wrapper" onclick="event.stopPropagation()">
      <div class="letter-content">
        <div class="letter-title">To my dearest love</div>
        <div id="typed-text"></div>
        <div class="letter-sign" id="signature"><span class="small-heart"></span><br>
        </div>
      </div>
    </div>
  </div>

  <script>
    const fullText = `14/2 kh√¥ng ch·ªâ l√† m·ªôt ng√†y ƒë·∫∑c bi·ªát, m√† l√† l·ªùi nh·∫Øc anh tr√¢n tr·ªçng em h∆°n. 
    C·∫£m ∆°n em v√¨ ƒë√£ ƒë·ªìng h√†nh, tin t∆∞·ªüng v√† ch·ªçn anh. M√¨nh c√πng nhau ƒëi th·∫≠t l√¢u nha.`;

    let i = 0;
    const speed = 50;

    function typeWriter() {
      const element = document.getElementById("typed-text");
      if (i < fullText.length) {
        if (fullText.charAt(i) === '\n') {
          element.innerHTML += '<br>';
        } else {
          element.innerHTML += fullText.charAt(i);
        }
        i++;
        setTimeout(typeWriter, speed);
      } else {
        document.getElementById("signature").style.opacity = "1";
      }
    }

    function openLetter() {
      const modal = document.getElementById("letter-modal");
      document.getElementById("typed-text").innerHTML = "";
      document.getElementById("signature").style.opacity = "0";
      i = 0;
      modal.classList.add("active");
      modal.style.display = "flex";
      setTimeout(typeWriter, 800);
    }

    function closeModal(e) {
      if (e.target === document.getElementById("letter-modal")) {
        const modal = document.getElementById("letter-modal");
        modal.classList.remove("active");
        setTimeout(() => {
          modal.style.display = "none";
        }, 1000);
      }
    }

    document.getElementById("letter-card").onclick = openLetter;

    document.getElementById("go-to-page2").onclick = function() {
      const card = this;
      if (card.classList.contains("clicking")) return;
      card.classList.add("clicking");
      setTimeout(() => {
        window.location.href = "heartvip/index.html";
      }, 900);
    };

    document.getElementById("go-to-kiss").onclick = function() {
      const card = this;
      if (card.classList.contains("clicking")) return;
      card.classList.add("clicking");
      setTimeout(() => {
        window.location.href = "love/index.html";
      }, 900);
    };

    document.getElementById("go-to-gift").onclick = function() {
      const card = this;
      if (card.classList.contains("clicking")) return;
      card.classList.add("clicking");
      setTimeout(() => {
        window.location.href = "gif.html";
      }, 900);
    };

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const modal = document.getElementById("letter-modal");
        if (modal.classList.contains("active")) {
          closeModal({ target: modal });
        }
      }
    });

   
    const audio = document.getElementById('background-music');
    const musicBtn = document.getElementById('music-control');
    const musicIcon = document.getElementById('music-icon');

    let isPlaying = false;

   
    function playAudioOnInteraction() {
      if (isPlaying) return;
      audio.volume = 0.4;
      audio.play().then(() => {
        isPlaying = true;
        musicBtn.classList.add('playing');
        musicIcon.textContent = '‚ô™';
      }).catch(() => {
      });
    }

    document.addEventListener('click', playAudioOnInteraction, { once: true });
    document.addEventListener('touchstart', playAudioOnInteraction, { once: true });

    function toggleMusic() {
      if (isPlaying) {
        audio.pause();
        musicBtn.classList.remove('playing');
        musicIcon.textContent = '‚ô´';
      } else {
        audio.play();
        musicBtn.classList.add('playing');
        musicIcon.textContent = '‚ô™';
      }
      isPlaying = !isPlaying;
    }
  </script>

</body>
</html>